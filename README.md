|    Metrics    |                                                                                     Master                                                                                     |                                                                                  Develop                                                                                 |
|:-------------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| CI status     | [![pipeline status](https://gitlab.com/redmic-project/device/oag-buoy/buoy-client/badges/master/pipeline.svg)](https://gitlab.com/redmic-project/device/oag-buoy/buoy-client/commits/master) | [![pipeline status](https://gitlab.com/redmic-project/device/oag-buoy/buoy-client/badges/dev/pipeline.svg)](https://gitlab.com/redmic-project/device/oag-buoy/buoy-client/commits/dev)  |
| Test coverage | [![coverage report](https://gitlab.com/redmic-project/device/oag-buoy/buoy-client/badges/master/coverage.svg)](https://gitlab.com/redmic-project/device/oag-buoy/buoy-client/commits/master) | [![coverage report](https://gitlab.com/redmic-project/device/oag-buoy/buoy-client/badges/dev/coverage.svg)](https://gitlab.com/redmic-project/device/oag-buoy/buoy-client/commits/dev) |


# Boya
Este proyecto surge por la necesidad de crear una boya científica donde recoger
datos de diferentes dispositivos. Para ello se ha optado por utilizar un minipc
modelo Raspeberry Pi 3 al cual se conectan los diferentes dispositivos.

Los datos recogidos son almacenados internamente en una base de datos, para 
posteriormente ser transmitidos a REDMIC. Esta transmisión de datos se realiza
mediante una conexión móvil 3g/4g, usando el protocolo MQTT.

## Dispositivos
* Estación meteorológica.
* Correntímetro.

## Conexión a internet

### DDNS con DDClient
Para mantener el contacto con la boya, se utiliza un DDNS (DNS dinámico) que
apunta a la dirección IP que se le ha asignado al dongle 3g/4g USB. Esto es
necesario porque dicha IP puede cambiar en cualquier momento, por lo que se
mantiene actualizada utilizando el programa DDClient.

Instalar servicio
```
sudo apt-get install ddclient
```

Fichero de configuración de DDClient (`/etc/ddclient.conf`):
```
# Configuration file for ddclient generated by debconf
#
# /etc/ddclient.conf

protocol=dyndns2
use=web, web=checkip.dynu.com/, web-skip='IP Address'
server=api.dynu.com
login=username
password=password
boyagranadilla.dynu.net
```

Activar el servicio en el arranque:
```
sudo systemctl enable ddclient
```

### SSH inverso
Como medida de respaldo, se mantiene una conexión SSH hacia un servidor remoto,
de tal manera que si la boya no es accesible mediante su registro DDNS, se pueda
optar por esta vía.
